{"version":1,"kind":"Article","sha256":"8ebc613fa81c1112607644eb14e50d28bbf7f8de03974b593cfaf6753602d3fe","slug":"content.blogs.2020.2020-07-16-new-release-gtsam","location":"/Content/Blogs/2020/2020-07-16-new-release-gtsam.md","dependencies":[],"frontmatter":{"title":"Releasing GTSAM 4.0.3","authors":[{"nameParsed":{"literal":"Fan Jiang","given":"Fan","family":"Jiang"},"name":"Fan Jiang","url":"https://blog.amayume.net/","id":"contributors-2020-07-16-new-release-gtsam-generated-uid-0"}],"date":"2020-07-16","github":"https://github.com/borglab/gtsam","numbering":{"title":{"offset":2}},"edit_url":"https://github.com/borglab/gtsam/blob/docs/ktk-sdk/Content/Blogs/2020/2020-07-16-new-release-gtsam.md","thumbnail":"/cayley_distortion-19eede6eb641ca9b7a0e303caac9afd9.png","exports":[{"format":"md","filename":"2020-07-16-new-release-gtsam.md","url":"/2020-07-16-new-relea-a260e3392a40d8993f7af94e345d6bf3.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"PptlXBhxKH"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"caXYYJYLWi"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"You are probably here because you do optimization, like everyone here on the GTSAM team. As fellow roboticists, we know how frustrating it be when your problem does not converge.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"tEYVv6NcIU"}],"key":"mb02v8e45Y"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"To further optimize your optimization experience, we are excited to announce this new release of GTSAM, GTSAM ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"o2MfT3KDhd"},{"type":"inlineCode","value":"4.0.3","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ToOkGFYteM"},{"type":"text","value":", where we incorporated a lot of new features and bugfixes, as well as substantial improvements in convergence for Pose3-related problems.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"NCXGFaHHLM"}],"key":"GTVf0ShUtA"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Note that GTSAM ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"DGeY1aoKy4"},{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"already","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qKxvixCXWt"}],"key":"Y1a86Um6PX"},{"type":"text","value":" provides the excellent Pose3 initialization module by Luca Carlone, in ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"eFTKmuH08P"},{"type":"inlineCode","value":"InitializePose3","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"LETx0I32ZM"},{"type":"text","value":", which we always recommend if your pipeline does not provide a good initial estimate out of the box.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EdJTJCA8SG"}],"key":"F5zDxdBuXt"},{"type":"heading","depth":2,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Major Changes","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"rw3Bvi4ZJ7"}],"identifier":"major-changes","label":"Major Changes","html_id":"major-changes","implicit":true,"key":"S0tqoeUp1A"},{"type":"heading","depth":3,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Switching Away from Cayley","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"QJ959DCaBK"}],"identifier":"switching-away-from-cayley","label":"Switching Away from Cayley","html_id":"switching-away-from-cayley","implicit":true,"key":"ZTlHxSSQJl"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"TL;DR:","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"QdKmyriu9o"}],"key":"pKomGdMdha"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"GTSAM will now default to using the full ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"wCLVZNu8D4"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"CuLD3ayp9U"},{"type":"text","value":" exponential map, instead of using the Cayley map, which should give better convergence for most problems without performance impact.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"hJPES5rriQ"}],"key":"phrvk83HRZ"}],"key":"l6qNdbDw6f"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"In nonlinear optimization, one important factor affecting the convergence is the mathematical structure of the object we are optimizing on. In many practical 3D robotics problems this is the ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"zqrefuhuoO"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"u7fpBzIfEy"},{"type":"text","value":" manifold describing the structure of 3D Poses.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ykYVW5rx5F"}],"key":"CooU3NjJ8U"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"It is not easy to directly operate on nonlinear manifolds like ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"QHFzK3HuCr"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"Rf8vy8YUI2"},{"type":"text","value":", so libraries like GTSAM uses the following strategy:","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"G6b7ge4XF1"}],"key":"lRKMPaGH4h"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Linearize the ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"WB8akcfhef"},{"type":"emphasis","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"error","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"Ga8U7y2tiF"}],"key":"tVz0bViNr2"},{"type":"text","value":" manifold at the current estimate","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"WRqU2XBseI"}],"key":"n2pqk5UwjM"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Calculate the next update in the associated tangent space","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"u4ahk8I1iv"}],"key":"gtQRIuwMGv"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Map the update back to the manifold with a ","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"NG57urf0tp"},{"type":"emphasis","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"retract","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"pIziswVRMS"}],"key":"Vfqq6HcjsG"},{"type":"text","value":" map","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"jag151103N"}],"key":"KoGHCuFuuo"}],"key":"FkG7VHuycD"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"We used two distinct but equally important concepts above: 1) the error metric, which is in a PoseSLAM problems is the measure of error between two poses; and 2) the ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"TbqrzCDBbX"},{"type":"emphasis","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"retract","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"iqDhQhgdP8"}],"key":"Bsl3jJe7JK"},{"type":"text","value":" operation, which is how we apply a computed linear update back to the nonlinear error manifold.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"YaLRrhBwTm"}],"key":"zHQzGDP8ie"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"In GTSAM, you can choose, at compile time, between four different choices for the retract map on the ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"seRlrxChoh"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"Dl5ZM9w1Nd"},{"type":"text","value":" manifold:","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"BM8IEc7YNs"}],"key":"jeovWkgV9Y"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":37,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Full: Exponential map on ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"ezYOjN8LI9"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"YIbqV9QPBy"}],"key":"QfT11Qubxo"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Decomposed retract, which uses addition for translation and:","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"ZciUP3iVyv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":39,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Exponential map ","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"BxjfvM9rLc"},{"type":"inlineMath","value":"\\mathrm{SO(3)}","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">O</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SO(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SO</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"ewFf4efBCr"},{"type":"text","value":" with Rotation Matrix","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"zSBzCn27UE"}],"key":"WvUCtmfjcE"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Exponential map ","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"dGZd42Sw73"},{"type":"inlineMath","value":"\\mathrm{SO(3)}","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">O</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SO(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SO</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"rM60H44mma"},{"type":"text","value":" with Quaternions","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"rgnFa2eOUP"}],"key":"D3CLLXZkCd"},{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"Cayley map on ","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"CMgLD73ebl"},{"type":"inlineMath","value":"\\mathrm{SO(3)}","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">O</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SO(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SO</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"b9UEXYyu2S"},{"type":"text","value":" with Rotation Matrix","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"Zwb8TTQZ8f"}],"key":"lLOCyW8TjV"}],"key":"TedYeoII0O"}],"key":"ULmSfiB7mL"}],"key":"vWYBt78F7l"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Previously in GTSAM, we used the Cayley map by default, which is an approximation of the ","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"gTFRAfnk4R"},{"type":"inlineMath","value":"\\mathrm{SO(3)}","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">O</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SO(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SO</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"poaixsFebB"},{"type":"text","value":" exponential map when the tangent vector (rotation error) is small. This is perfectly fine locally, if we have a relatively good initial estimate.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"KkvOTNmOuK"}],"key":"KQCn4SFKVX"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"However, since we are also using the inverse of the retract as the error metric, a different choice for the retract map could give better convergence.\nAs you can see in the following figure, the Cayley ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"dGOK8R7BA1"},{"type":"emphasis","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"local","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"QqlTNoTLHq"}],"key":"Tzu6VpzHeC"},{"type":"text","value":" map is unbounded when ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"SXN00dU1kp"},{"type":"text","value":"θ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"JgirKHMYvT"},{"type":"text","value":" is large, and thus negatively impacts convergence when the initialization is not good enough.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"DMYxN7RYOi"}],"key":"d91BpGCkRx"},{"type":"image","url":"/cayley_distortion-19eede6eb641ca9b7a0e303caac9afd9.png","alt":"Cayley","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"cVDOGHkS1j","urlSource":"/_static/release_403/cayley_distortion.png"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Based on careful benchmarking, in the new release, we will not use the Cayley approximation by default, which should give you a better convergence for most applications. This is  especially true if your initial estimate can be far away from the global optimum: the impact on well-initialized problems is minimal. You can look at the benchmark yourself in the next section, if you are interested.","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"JxtIulfspp"}],"key":"ovcVDTxqSk"},{"type":"heading","depth":3,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"Can we still use Cayley and Friends?","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"VrhS3XEV9g"}],"identifier":"can-we-still-use-cayley-and-friends","label":"Can we still use Cayley and Friends?","html_id":"can-we-still-use-cayley-and-friends","implicit":true,"key":"olsEHfFFj0"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"Yes, just not by default. Historically, the Cayley approximation was chosen as a cheaper alternative to the full exponential map, and our intention is not to tell you that you should not use it, rather to inform you that without properly initializing your initial estimate, the result of Cayley could be inferior to those obtained with the full ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"EAyNNcSOig"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"tOm2PyL63w"},{"type":"text","value":" retract.","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"WWnaldd4tX"}],"key":"tINNVadMaz"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"In order to give you an intuitive understanding of the situation we made a benchmark where the four configurations by:","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"Cc4RiZeYiW"}],"key":"USnX4fFJ0K"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":58,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"asking GTSAM to solve 6 benchmark optimization datasets, with the Chordal initialization as initial estimate (from ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"LWiujTKWV8"},{"type":"inlineCode","value":"InitializePose3","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"Npou3AdKxT"},{"type":"text","value":");","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"q5Pb5xmQjB"}],"key":"X5X7wgqTv0"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"text","value":"asking GTSAM to solve 6 benchmark optimization datasets, this time with 100 ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"THGw82oF8d"},{"type":"emphasis","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"random","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"dhFQA92qVP"}],"key":"yWWu5z33Yo"},{"type":"text","value":" initial estimates, sampled around the ground truth by a Gaussian distribution of 1 sigma, and observe the convergence metrics.","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"R1KW8e2wfo"}],"key":"srAkUnGd2D"}],"key":"VacnZGdfII"},{"type":"table","position":{"start":{"line":61,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"image","url":"/chordal_convergence-52c78bd0a56a43d28e2169bacccf7409.png","alt":"Chordal Convergence","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"FubWUtYAYv","urlSource":"/_static/release_403/chordal_convergence.png"}],"key":"UOG13vauDF"},{"type":"tableCell","header":true,"position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"image","url":"/success_rates-d02b1d342c807dacde89607432412f95.png","alt":"Success Rates","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"f1zAnm0vb4","urlSource":"/_static/release_403/success_rates.png"}],"key":"GZOQzcQ5rr"}],"key":"HoN0RgYWSn"},{"type":"tableRow","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"a) With Chordal Initialization","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"MitWT59H3v"}],"key":"Fwch11yvvI"},{"type":"tableCell","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"b) Without Chordal Initialization","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"a56M9JSOUq"}],"key":"O22YlOkRz3"}],"key":"SJRn7KM4A9"}],"key":"j6kOR6Kwa8"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Note that with proper initialization, all 4 configurations achieved convergence without issue. However, the full ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"ajCbBtHfGF"},{"type":"inlineMath","value":"\\mathrm{SE(3)}","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">E</mi><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SE(3)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">SE</span><span class=\"mopen\">(</span><span class=\"mord mathrm\">3</span><span class=\"mclose\">)</span></span></span></span></span>","key":"fHVIPZJNtS"},{"type":"text","value":" retract exhibited much better convergence with randomly initialized estimates.","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"dVsnAyCkgT"}],"key":"Hj9090Au76"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"For a visual reference, here are 3D scatter plots of samples from the random benchmark results that you can zoom in and see the difference:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"RehqXnBgCo"}],"key":"oyMqcz5qOm"},{"type":"div","children":[{"type":"div","identifier":"2e54447b-538c-4cac-abd4-e2865417fa63","label":"2e54447b-538c-4cac-abd4-e2865417fa63","class":"plotly-graph-div","style":{"height":"60em","width":"100%"},"children":[],"html_id":"id-2e54447b-538c-4cac-abd4-e2865417fa63","key":"g2DJBwLkt4"}],"key":"ETgbHipvs9"},{"type":"div","children":[{"type":"div","identifier":"7034b6ec-dfbc-4220-888b-df106a160cd1","label":"7034b6ec-dfbc-4220-888b-df106a160cd1","class":"plotly-graph-div","style":{"height":"60em","width":"100%"},"children":[],"html_id":"id-7034b6ec-dfbc-4220-888b-df106a160cd1","key":"PPENPoCy0x"}],"key":"UcdTvGiXvg"},{"type":"paragraph","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"text","value":"The results can be reproduced with this repo: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"zsZ3bpiBQ5"},{"type":"link","url":"https://github.com/ProfFan/expmap-benchmark","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"inlineCode","value":"https://github.com/ProfFan/expmap-benchmark","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"VxnocWbd9R"}],"urlSource":"https://github.com/ProfFan/expmap-benchmark","error":true,"key":"butolBrfh2"}],"key":"HxsjetEesS"},{"type":"heading","depth":2,"position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"text","value":"Important New Features & Bugfixes","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"XaCCWQtys4"}],"identifier":"important-new-features-bugfixes","label":"Important New Features & Bugfixes","html_id":"important-new-features-bugfixes","implicit":true,"key":"Dmo2douue1"},{"type":"paragraph","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"children":[{"type":"text","value":"In addition to the change in default Pose3 retract, which will now be the full exponential map, GTSAM has seen a steady stream of commits since the last release, 4.0.2, which has been there for more than 6 months. A summary of the most important issues and features is below:","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"j3eJrJsihR"}],"key":"Z1OE1GBuXy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":136,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"Robust noise model is ready for general usage","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"aDIxBRokjv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":137,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"It can be used to replace RANSAC for some applications","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"bUVM3GSBGG"}],"key":"teqdTOTxeI"},{"type":"listItem","spread":true,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"For a gentle introduction, see ","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"vOWf3ZNq68"},{"type":"link","url":"/2019/09/20/robust-noise-model.html","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"this","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"PEDhYwm1Au"}],"urlSource":"/2019/09/20/robust-noise-model.html","key":"opFRppDnKj"},{"type":"text","value":" awesome tutorial by Varun Agrawal","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"e2YIa3o5Um"}],"key":"FnJcvpqBVX"}],"key":"GLa54y0OKf"}],"key":"eiRaIHeZ9b"},{"type":"listItem","spread":true,"position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"inlineCode","value":"CombinedImuFactor","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"HmXBU0ijk6"},{"type":"text","value":" serialization is now fixed","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"cDgi8t9avK"}],"key":"GuJpR2WSa6"},{"type":"listItem","spread":true,"position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"The ISAM2 KITTI example has a C++ port, thanks Thomas Jespersen for the help!","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"BiqkmxdYpM"}],"key":"GxiWz6pbOO"},{"type":"listItem","spread":true,"position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"children":[{"type":"text","value":"Now you can choose arbitrary MATLAB install prefix for the toolbox build","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"kD6Gpcu0hi"}],"key":"ieIC7R1h52"},{"type":"listItem","spread":true,"position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Now you can ","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"AXuZnkvyrw"},{"type":"inlineCode","value":"make python-install","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"QTFSGux1xi"},{"type":"text","value":" to install the Python toolbox","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"iURjwfcoNg"}],"key":"yKm8GLqfAN"},{"type":"listItem","spread":true,"position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"Now you can use the Conjugate Gradient solver in Python","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"v0fK2t6AmX"}],"key":"AcwIfmsHo5"},{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"children":[{"type":"text","value":"Now you can install GTSAM with ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"jWiZUcPGq1"},{"type":"inlineCode","value":"pip","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"WqNQbPOf47"},{"type":"text","value":" if you only use the Python interface","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"j0dwCAYvJR"}],"key":"pRZnwxLlwB"},{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"Added ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"OBVXUPQaL0"},{"type":"inlineCode","value":"FrobeniusFactor","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"pkgNpPAX4U"},{"type":"text","value":" and ","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"dQfnuTDQhw"},{"type":"inlineCode","value":"FrobeniusWormholeFactor","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"OUPsPtcUE8"},{"type":"text","value":" for robust SFM applications","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"N9VOUP5bkR"}],"key":"hcImjGPLxS"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"Switched to in-place update of the diagonal Hessian in LM","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"aTF37A0p00"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"text","value":"expect a 3%-5% speedup, YMMV","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"dft3R4PqHD"}],"key":"uvW8cthrTv"}],"key":"HK3lT3qKPp"}],"key":"AjALrqgF7c"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"text","value":"The Cython wrapper now can be built on Windows :)","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"hMTe1FN37T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"text","value":"Kudos ","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"sxnHXufJTZ"},{"type":"inlineCode","value":"@tuwuhs","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"MArrKfhA4i"},{"type":"text","value":" for the help!","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"NE9ibmj9bE"}],"key":"y5reNLgX9v"}],"key":"KI2MTaUuNo"}],"key":"bNbdupoHLW"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"Fixed a few memory-related bugs detected by the LLVM sanitizer","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"rl4WSd7elZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":151,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"Greatly improved stability","position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"key":"YbF4VKHeFO"}],"key":"cGRnCtoD2v"}],"key":"hzY6bXE50x"}],"key":"hYE7w6rmR1"}],"key":"SW15D7Aco8"},{"type":"heading","depth":3,"position":{"start":{"line":153,"column":1},"end":{"line":153,"column":1}},"children":[{"type":"text","value":"Finale","position":{"start":{"line":153,"column":1},"end":{"line":153,"column":1}},"key":"vOofet4ILe"}],"identifier":"finale","label":"Finale","html_id":"finale","implicit":true,"key":"awVFg1XP2j"},{"type":"paragraph","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"With over a hundred merged pull requests, we welcome you again on board the new release of GTSAM, GTSAM ","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"QZelW7qBqb"},{"type":"inlineCode","value":"4.0.3","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"snwGHiujpj"},{"type":"text","value":". We would like to thank all our contributors for their precious commits and bug reports. Finally, thank you for using GTSAM and please don’t hesitate to open an issue on GitHub if you found a bug!","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"YnKr72tjWS"}],"key":"qt0ImgwxQr"}],"key":"WpSEF7QFo0"}],"key":"Np6ruzaDHo"},"references":{"cite":{"order":[],"data":{}}}}