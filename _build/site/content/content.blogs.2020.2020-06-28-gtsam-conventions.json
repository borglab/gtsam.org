{"version":1,"kind":"Article","sha256":"f74625226be2f3652c6465bce6420cf6b3e19b1350da398c6ef2f5016b79badc","slug":"content.blogs.2020.2020-06-28-gtsam-conventions","location":"/Content/Blogs/2020/2020-06-28-gtsam-conventions.md","dependencies":[],"frontmatter":{"title":"Geometry and Variable Naming Conventions","authors":[{"nameParsed":{"literal":"Samarth Brahmbhatt","given":"Samarth","family":"Brahmbhatt"},"name":"Samarth Brahmbhatt","url":"https://samarth-robo.github.io","id":"contributors-2020-06-28-gtsam-conventions-generated-uid-0"}],"date":"2020-06-28","github":"https://github.com/borglab/gtsam","numbering":{"title":{"offset":2}},"edit_url":"https://github.com/borglab/gtsam/blob/docs/ktk-sdk/Content/Blogs/2020/2020-06-28-gtsam-conventions.md","exports":[{"format":"md","filename":"2020-06-28-gtsam-conventions.md","url":"/2020-06-28-gtsam-con-3beefdc4be3b06bb7f50e07da33ade35.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"I am a post-doc at ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"G92GfYD8yE"},{"type":"link","url":"https://vladlen.info","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Intel ISL","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"n6sMJxUKyt"}],"urlSource":"https://vladlen.info","key":"bMZUF2MbO0"},{"type":"text","value":". In my\n","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"fn7H2RpzTs"},{"type":"link","url":"https://contactpose.cc.gatech.edu","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"PhD work","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YFZYpoMVCF"}],"urlSource":"https://contactpose.cc.gatech.edu","key":"BxnqCP3DHq"},{"type":"text","value":", I used GTSAM for object pose\nestimation and 3D reconstruction of hand joints to study hand-object interaction.\nI love GTSAM for its ability to optimize geometric quantities and deal with\nuncertainty in observations. However, it is easy to get lost in the web of\ninverse transformations while optimizing complex geometric systems. I’ve found\nthat naming code variables consistently with textbook notation conventions can\nhelp mitigate this. This post describes some suggestions for doing that.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dFmPj0TopA"}],"key":"pyplDr2lfN"},{"type":"heading","depth":2,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Points","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"MXgApsgMdP"}],"identifier":"points","label":"Points","html_id":"points","implicit":true,"key":"hicqRZIn01"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":19,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Always name your 3D points like how you would on paper. A point ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"M55VuGZnV5"},{"type":"inlineMath","value":"^{c}X","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>c</mi></msup><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">^{c}X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>","key":"CE0QhM8Fi7"},{"type":"text","value":" in the\ncamera coordinate system ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"VcXj8iPeg4"},{"type":"inlineMath","value":"c","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span>","key":"hr3smHoCZr"},{"type":"text","value":" is named ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"G1UiZ7D9Lz"},{"type":"inlineCode","value":"cX","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"lzm0JIZDbN"},{"type":"text","value":".","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"FoW3m3SqQs"}],"key":"gkqk2jvgdE"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"3D points use uppercase letters, 2D points use lowercase letters.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Dx7c4nwTzx"}],"key":"uBEIUUDPXm"}],"key":"X0EMxI5IWC"},{"type":"heading","depth":2,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Pose","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"mYjCtrx179"}],"identifier":"pose","label":"Pose","html_id":"pose","implicit":true,"key":"jiul5hSqXd"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Name your pose variables like how you would write them on paper.\nThe pose ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"l5TZ1gyT9O"},{"type":"inlineMath","value":"^wT_c","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">^wT_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"GFhqLNwGl0"},{"type":"text","value":" of camera coordinate frame ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"ZAdnxIjcGW"},{"type":"inlineMath","value":"c","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span>","key":"aUdBIIKiM4"},{"type":"text","value":" in the world coordinate frame\n","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"SWI70Z0iO3"},{"type":"inlineMath","value":"w","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span>","key":"jdxDh6JXny"},{"type":"text","value":" is named ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"cyloZKxjjS"},{"type":"inlineCode","value":"wTc","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"dxBWnKUTz0"},{"type":"text","value":". In GTSAM jargon, ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"vGkkXqiAuj"},{"type":"inlineCode","value":"c","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"i1oS2JC34o"},{"type":"text","value":" is the ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"zrxt7IbuqN"},{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"pose coordinate","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"N1NRXKn5Wu"}],"key":"G4i9NzaODH"},{"type":"text","value":" frame,\nand ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"eemOW60m1S"},{"type":"inlineCode","value":"w","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"qPGLcCPSsF"},{"type":"text","value":" is the ","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"bQ7g9wkbQL"},{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"world coordinate","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"WrBMUvfFer"}],"key":"rlyvvXIMT8"},{"type":"text","value":" frame.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"jlgxyAtQEX"}],"key":"r2tX7lJwF8"},{"type":"heading","depth":2,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Composing Poses","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"NqHzhxwXnH"}],"identifier":"composing-poses","label":"Composing Poses","html_id":"composing-poses","implicit":true,"key":"z7nPzhFkPk"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Math: ","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"wwibgA7cni"},{"type":"inlineMath","value":"^oT_c =~^oT_w~\\cdot~^wT_c","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>o</mi></msup><msub><mi>T</mi><mi>c</mi></msub><mo>=</mo><msup><mtext> </mtext><mi>o</mi></msup><msub><mi>T</mi><mi>w</mi></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">^oT_c =~^oT_w~\\cdot~^wT_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">o</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">o</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"Uf6yl2dtgl"},{"type":"text","value":".","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"iww28anM5H"}],"key":"BXxw2gUZCe"},{"type":"container","kind":"code","children":[{"type":"code","lang":"cpp","value":"Pose3 oTw = Pose3(...);\nPose3 wTc = Pose3(...);\nPose3 oTc = oTw * wTc;\n// same as Pose3 oTc = oTw.compose(wTc);","key":"wiEaW1SE0W"},{"type":"caption","children":[{"type":"paragraph","children":[{"type":"text","value":"GTSAM code","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"SI9yp3ipjV"}],"key":"siuiAq8ROu"}],"key":"HIz2gWcThI"}],"enumerator":"1","key":"C8gEkr5nyH"},{"type":"heading","depth":2,"position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"Transforming Points ","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"Yq058C04Nt"},{"type":"emphasis","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"children":[{"type":"text","value":"from","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"Nh8ZraERyZ"}],"key":"ywWHpHoqxv"},{"type":"text","value":" Pose Coordinates","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"OhaGYtPClA"}],"identifier":"transforming-points-from-pose-coordinates","label":"Transforming Points from Pose Coordinates","html_id":"transforming-points-from-pose-coordinates","implicit":true,"key":"BLelrKzv0A"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"This operation uses the camera pose in the world coordinate frame\n(","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"dHv8gyid6p"},{"type":"inlineMath","value":"^wT_c","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub></mrow><annotation encoding=\"application/x-tex\">^wT_c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"kXyiHfAbss"},{"type":"text","value":") to bring points from the camera coordinate frame (","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"PuF27pKRc9"},{"type":"inlineMath","value":"^c\\tilde{\\mathbf{X}}","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>c</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^c\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"U5s84x8Ozh"},{"type":"text","value":") to\nthe world coordinate frame (","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"qBS12W2CIK"},{"type":"inlineMath","value":"^w\\tilde{\\mathbf{X}}","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>w</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^w\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"ujytjwVpOp"},{"type":"text","value":").","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"w8z2yWV7mR"}],"key":"mSZdNzQyK2"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Math: ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Do0AdoOsLh"},{"type":"inlineMath","value":"^w\\tilde{\\mathbf{X}} =~^wT_c~\\cdot~^c\\tilde{\\mathbf{X}}","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>w</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover><mo>=</mo><msup><mtext> </mtext><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mi>c</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^w\\tilde{\\mathbf{X}} =~^wT_c~\\cdot~^c\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"O6RqEyfwUO"}],"key":"u76QmEhalP"},{"type":"container","kind":"code","children":[{"type":"code","lang":"cpp","value":"Point3 wX = wTc.transformFrom(cX);\n// same as Point3 wX = wTc * cX;","key":"d8pOAh3HVV"},{"type":"caption","children":[{"type":"paragraph","children":[{"type":"text","value":"GTSAM code","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"N5Axq4xA1k"}],"key":"quriKKOwWh"}],"key":"YCU2dUh9B9"}],"enumerator":"2","key":"kVfDQoJICG"},{"type":"heading","depth":2,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"Transforming Points ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"gfkyCSEAOy"},{"type":"emphasis","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"to","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"WZcJIORItp"}],"key":"EzOqTky6cr"},{"type":"text","value":" Pose Coordinates","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"uyGXMMk2n9"}],"identifier":"transforming-points-to-pose-coordinates","label":"Transforming Points to Pose Coordinates","html_id":"transforming-points-to-pose-coordinates","implicit":true,"key":"YVRCN0Y5On"},{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"This operation uses the inverse of the camera pose ","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"JvQn21SCLw"},{"type":"inlineMath","value":"\\left(^wT_c\\right)^{-1}","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow><mo fence=\"true\">(</mo><msup><mrow></mrow><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub><mo fence=\"true\">)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\left(^wT_c\\right)^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.204em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>","key":"et3brAnrQA"},{"type":"text","value":"\nto bring points from the world coordinate frame (","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"T4v48jVvSC"},{"type":"inlineMath","value":"^w\\tilde{\\mathbf{X}}","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>w</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^w\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"FDPeiY3XZ8"},{"type":"text","value":") to\nthe camera coordinate frame (","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"gjyMirasoh"},{"type":"inlineMath","value":"^c\\tilde{\\mathbf{X}}","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>c</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^c\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"SiOsiHTz8i"},{"type":"text","value":").","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"mJzSdySAzd"}],"key":"bBtefBIg7S"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"Math: ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"Tmv7GCKv5w"},{"type":"inlineMath","value":"^c\\tilde{\\mathbf{X}} =~\\left(^wT_c\\right)^{-1}~\\cdot~^w\\tilde{\\mathbf{X}}","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mi>c</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover><mo>=</mo><mtext> </mtext><msup><mrow><mo fence=\"true\">(</mo><msup><mrow></mrow><mi>w</mi></msup><msub><mi>T</mi><mi>c</mi></msub><mo fence=\"true\">)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mi>w</mi></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^c\\tilde{\\mathbf{X}} =~\\left(^wT_c\\right)^{-1}~\\cdot~^w\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.204em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"NEwsajYqrJ"}],"key":"xKxhwqxQfe"},{"type":"container","kind":"code","children":[{"type":"code","lang":"cpp","value":"Point3 cX = wTc.transformTo(wX);","key":"gn9LWJOJQP"},{"type":"caption","children":[{"type":"paragraph","children":[{"type":"text","value":"GTSAM code","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"qLSweKMJJ3"}],"key":"oMWMtS5cX0"}],"key":"SiGpwiL2YU"}],"enumerator":"3","key":"bANoxJyGlh"},{"type":"heading","depth":2,"position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"Cameras","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"ZsmJDcyEAJ"}],"identifier":"cameras","label":"Cameras","html_id":"cameras","implicit":true,"key":"Egy68fURfe"},{"type":"paragraph","position":{"start":{"line":66,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"The GTSAM pinhole camera classes\n(e.g. ","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"wUby6PeSSl"},{"type":"link","url":"https://github.com/borglab/gtsam/blob/develop/gtsam/geometry/CalibratedCamera.cpp","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"inlineCode","value":"PinholeBase","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"oyzGv6UvdV"}],"urlSource":"https://github.com/borglab/gtsam/blob/develop/gtsam/geometry/CalibratedCamera.cpp","data":{"kind":"file","org":"borglab","repo":"gtsam","reference":"develop","file":"gtsam/geometry/CalibratedCamera.cpp","raw":"https://raw.githubusercontent.com/borglab/gtsam/develop/gtsam/geometry/CalibratedCamera.cpp"},"internal":false,"protocol":"github","key":"QQzeUVcFrD"},{"type":"text","value":")\ninternally use ","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"Idp5KnECBZ"},{"type":"inlineCode","value":"transformTo()","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"uTkR4ANM8t"},{"type":"text","value":" to transform 3D points into the camera\ncoordinates, so you should use the pose of the camera w.r.t. world while\nconstructing the object:","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"NDH6WqhGP3"}],"key":"fsrT40ERdV"},{"type":"code","lang":"cpp","value":"Pose3 wTc = Pose3(...);\nSimpleCamera cam(wTc, K);","position":{"start":{"line":72,"column":1},"end":{"line":75,"column":1}},"key":"ksHR0J7zwc"},{"type":"paragraph","position":{"start":{"line":76,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"now you can use ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"AlSlnDQ1bU"},{"type":"inlineCode","value":"cam","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"XNAa7I56wV"},{"type":"text","value":" in the ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"QKaanBX43e"},{"type":"inlineCode","value":"TriangulationFactor","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"NYPytxxMAN"},{"type":"text","value":" for example. Other factors\nlike the\n","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"Gq3s5Z3O9H"},{"type":"link","url":"https://github.com/borglab/gtsam/blob/develop/gtsam/slam/ProjectionFactor.h","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"inlineCode","value":"GenericProjectionFactor","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"PNIANMZeYC"}],"urlSource":"https://github.com/borglab/gtsam/blob/develop/gtsam/slam/ProjectionFactor.h","data":{"kind":"file","org":"borglab","repo":"gtsam","reference":"develop","file":"gtsam/slam/ProjectionFactor.h","raw":"https://raw.githubusercontent.com/borglab/gtsam/develop/gtsam/slam/ProjectionFactor.h"},"internal":false,"protocol":"github","key":"JDim9IceX1"},{"type":"text","value":"\nalso use the same convention:","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"rQR0eFZv4d"}],"key":"Tnki0l0h6r"},{"type":"math","value":"\\begin{align*}\n^{sensor}\\tilde{\\mathbf{X}}\n&=~^{sensor}T_{world}~\\cdot~^{world}\\tilde{\\mathbf{X}}\\\\\n&=~^{sensor}T_{body}~\\cdot~^{body}T_{world}~\\cdot~^{world}\\tilde{\\mathbf{X}}\\\\\n&= \\left(^{world}T_{body}~\\cdot~^{body}T_{sensor}\\right)^{-1}~\\cdot~^{world}\\tilde{\\mathbf{X}}\n\\end{align*}","position":{"start":{"line":81,"column":1},"end":{"line":88,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msup><mrow></mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>r</mi></mrow></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><msup><mtext> </mtext><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>r</mi></mrow></msup><msub><mi>T</mi><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><msup><mtext> </mtext><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>r</mi></mrow></msup><msub><mi>T</mi><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msup><msub><mi>T</mi><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><msup><mrow><mo fence=\"true\">(</mo><msup><mrow></mrow><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><msub><mi>T</mi><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msub><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msup><msub><mi>T</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>r</mi></mrow></msub><mo fence=\"true\">)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mtext> </mtext><mo>⋅</mo><msup><mtext> </mtext><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{align*}\n^{sensor}\\tilde{\\mathbf{X}}\n&amp;=~^{sensor}T_{world}~\\cdot~^{world}\\tilde{\\mathbf{X}}\\\\\n&amp;=~^{sensor}T_{body}~\\cdot~^{body}T_{world}~\\cdot~^{world}\\tilde{\\mathbf{X}}\\\\\n&amp;= \\left(^{world}T_{body}~\\cdot~^{body}T_{sensor}\\right)^{-1}~\\cdot~^{world}\\tilde{\\mathbf{X}}\n\\end{align*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.9291em;vertical-align:-2.2145em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7145em;\"><span style=\"top:-4.8947em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">se</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">sor</span></span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span><span style=\"top:-3.3117em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5486em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2145em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7145em;\"><span style=\"top:-4.8947em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">se</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">sor</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span><span style=\"top:-3.3117em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">se</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">sor</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span><span style=\"top:-1.5486em;\"><span class=\"pstrut\" style=\"height:3.1031em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">se</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">sor</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1031em;\"><span style=\"top:-3.352em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mspace nobreak\"> </span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2145em;\"><span></span></span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"yLIgiyUyDe"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"strong","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"m8Bg6I5tJ7"}],"key":"dW7oTJIYBQ"},{"type":"text","value":": In a mobile robot SLAM scenario, wheel odometry might tell you where\nthe robot body is in the world (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"HKOWQ1D4pB"},{"type":"inlineMath","value":"^{world}T_{body}","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><msub><mi>T</mi><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">^{world}T_{body}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1352em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>","key":"qkbo4A8Ptu"},{"type":"text","value":"), and the robot URDF spec\nmight tell you where the camera is on the robot body (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"Yj5GheMNA6"},{"type":"inlineMath","value":"^{body}T_{sensor}","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mrow><mi>b</mi><mi>o</mi><mi>d</mi><mi>y</mi></mrow></msup><msub><mi>T</mi><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>r</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">^{body}T_{sensor}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9991em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">se</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">sor</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"qsBEgtbMmK"},{"type":"text","value":").\nTogether, these allow you to situate camera observations in the world coordinate\nframe.","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"ZiQa2WI6ci"}],"key":"EeVzcszWBO"},{"type":"container","kind":"code","children":[{"type":"code","lang":"cpp","value":"Pose3 body_T_sensor = ...\nPoint2 sensor_p = ...  // 2D point in the image\n// in the following factor,\n// Symbol('T', i) is world_T_body for the i'th frame\n// Symbol('X', j) is the j'th 3D point in world coordinates i.e. world_Xj\nauto f = GenericProjectionFactor<Pose3, Point3, Cal3_S2>(sensor_p, noise, Symbol('T', i), Symbol('X', j), K, body_T_sensor);","key":"x97c5QjB1w"},{"type":"caption","children":[{"type":"paragraph","children":[{"type":"text","value":"GTSAM code","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"KJ5KmP7Tzr"}],"key":"OcHEpCyFaA"}],"key":"g1ztMskNCj"}],"enumerator":"4","key":"NXsmfm7rmH"},{"type":"paragraph","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"It will project the world 3D point ","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"BAsJoi3Xhw"},{"type":"inlineMath","value":"^{world}\\tilde{\\mathbf{X}}","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow></mrow><mrow><mi>w</mi><mi>o</mi><mi>r</mi><mi>l</mi><mi>d</mi></mrow></msup><mover accent=\"true\"><mi mathvariant=\"bold\">X</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">^{world}\\tilde{\\mathbf{X}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.923em;\"></span><span class=\"mord\"><span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">X</span></span><span style=\"top:-3.6051em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span>","key":"mpjdZIpAYw"},{"type":"text","value":" into the sensor coordinates like so:","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"tyM8s8JfNo"}],"key":"iahcNOmTL6"},{"type":"code","lang":"cpp","value":"Pose3 world_T_sensor = world_T_body * body_T_sensor;\nPoint3 sensor_X = world_T_sensor.transformTo(world_X);","position":{"start":{"line":106,"column":1},"end":{"line":109,"column":1}},"key":"hIbOC0b2C2"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"and then project it to the image using instrinsics and then compare it to the detection ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"MzhxhK0qEY"},{"type":"inlineCode","value":"sensor_p","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"qiFKCueurv"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"FYKqShR0yG"}],"key":"OR70XhjTWp"}],"key":"A6ze1qjDEK"}],"key":"Z88QvXkFYU"},"references":{"cite":{"order":[],"data":{}}}}