
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Build" />
<meta property="og:type" content="website" />
<meta property="og:url" content="build-project.html" />
<meta property="og:site_name" content="GTSAM" />
<meta property="og:description" content="Configurations:,, GCC 4.2-7.3, Ubuntu 16.04 - 18.04,, OS X Clang 2.9-10.0, MacOS 10.6 - 10.14, 15.2-15.3,, OS X GCC 4.2, Windows 7, 8, 8.1, 10,, MSVC 2017,,,,, To build GTSAM from source, clone or ..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_build-project_a6685a10.png" />
<meta property="og:image:alt" content="Configurations:,, GCC 4.2-7.3, Ubuntu 16.04 - 18.04,, OS X Clang 2.9-10.0, MacOS 10.6 - 10.14, 15.2-15.3,, OS X GCC 4.2, Windows 7, 8, 8.1, 10,, MSVC 2017,,,..." />
<meta name="description" content="Configurations:,, GCC 4.2-7.3, Ubuntu 16.04 - 18.04,, OS X Clang 2.9-10.0, MacOS 10.6 - 10.14, 15.2-15.3,, OS X GCC 4.2, Windows 7, 8, 8.1, 10,, MSVC 2017,,,,, To build GTSAM from source, clone or ..." />
<meta name="twitter:card" content="summary_large_image" />

    <title>Build &#8212; Chris Holdgraf</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-examples.css?v=e236af4b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=b93cd24b" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-88310237-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-88310237-1');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-88310237-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'build-project';</script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this site..."
         aria-label="Search this site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Chris Holdgraf</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Build</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="build">
<h1>Build<a class="headerlink" href="#build" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table" id="id1">
<caption><span class="caption-text">Configurations</span><a class="headerlink" href="#id1" title="Link to this table">#</a></caption>
<tbody>
<tr class="row-odd"><td><p>GCC 4.2-7.3</p></td>
<td><p>Ubuntu 16.04 - 18.04</p></td>
</tr>
<tr class="row-even"><td><p>OS X Clang 2.9-10.0</p></td>
<td><p>MacOS 10.6 - 10.14, 15.2-15.3</p></td>
</tr>
<tr class="row-odd"><td><p>OS X GCC 4.2</p></td>
<td><p>Windows 7, 8, 8.1, 10</p></td>
</tr>
<tr class="row-even"><td><p>MSVC 2017</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>To build GTSAM from source, clone or download the latest release from the <a class="reference external" href="https://github.com/borglab/gtsam">GTSAM Github repo</a>. Then follow the build &amp; install instructions below.</p>
</section>
<section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading">#</a></h1>
<p>In the root library folder execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!bash</span>
$<span class="w"> </span>mkdir<span class="w"> </span>build
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
$<span class="w"> </span>cmake<span class="w"> </span>..
$<span class="w"> </span>make<span class="w"> </span>check<span class="w"> </span><span class="o">(</span>optional,<span class="w"> </span>runs<span class="w"> </span>unit<span class="w"> </span>tests<span class="o">)</span>
$<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<section id="important-installation-notes">
<h2>Important Installation Notes<a class="headerlink" href="#important-installation-notes" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>GTSAM requires the following libraries to be installed on your system:</p>
<ul class="simple">
<li><p>BOOST version 1.43 or greater (install through Linux repositories or MacPorts)</p></li>
<li><p>Cmake version 3.0 or higher</p></li>
<li><p>Support for XCode 4.3 command line tools on Mac requires CMake 2.8.8 or higher</p></li>
<li><p>Optional dependent libraries:</p>
<ul>
<li><p>If TBB is installed and detectable by CMake GTSAM will use it automatically. Ensure that CMake prints <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">Intel</span> <span class="pre">TBB</span> <span class="pre">:</span> <span class="pre">Yes</span></code>. To disable the use of TBB,
disable the CMake flag <code class="docutils literal notranslate"><span class="pre">GTSAM_WITH_TBB</span></code> (enabled by default). On Ubuntu, TBB may be installed from the Ubuntu repositories, and for other platforms it
may be downloaded from <a class="reference external" href="https://www.threadingbuildingblocks.org/">here</a>.</p></li>
<li><p>GTSAM may be configured to use MKL by toggling <code class="docutils literal notranslate"><span class="pre">GTSAM_WITH_EIGEN_MKL</span></code> and <code class="docutils literal notranslate"><span class="pre">GTSAM_WITH_EIGEN_MKL_OPENMP</span></code> to <code class="docutils literal notranslate"><span class="pre">ON</span></code>.
However, best performance is usually achieved with MKL disabled. We therefore advise you to benchmark your problem before using MKL.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>GTSAM makes extensive use of debug assertions, and we highly recommend you work in Debug mode while developing (not enabled by default). Likewise, it is imperative that you switch to release mode when running finished code and for timing. GTSAM will run up to 10x faster in Release mode! See the end of this document for
additional debugging tips.</p></li>
<li><p>GTSAM has <a class="reference external" href="http://www.doxygen.nl/">Doxygen</a> documentation. To generate, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">doc</span></code> from your build directory, or refer to the <a class="reference internal" href="#/doxygen"><span class="xref myst">statically generated version on this website</span></a>.</p></li>
<li><p>The instructions below install the library to the default system install path and build all components. From a terminal, starting in the root library folder, execute the commands below for an out-of-source build. This will build the library and unit tests, run all of the unit tests, and then install the library itself.</p></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>$<span class="w"> </span>mkdir<span class="w"> </span>build
<span class="w">  </span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="w">  </span>$<span class="w"> </span>cmake<span class="w"> </span>..
<span class="w">  </span>$<span class="w"> </span>make<span class="w"> </span>check<span class="w"> </span><span class="o">(</span>optional,<span class="w"> </span>runs<span class="w"> </span>unit<span class="w"> </span>tests<span class="o">)</span>
<span class="w">  </span>$<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="cmake-configuration-options-and-details">
<h2>CMake Configuration Options and Details<a class="headerlink" href="#cmake-configuration-options-and-details" title="Link to this heading">#</a></h2>
<p>GTSAM has a number of options that can be configured, which is best done with
one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ccmake</span></code>:      the curses GUI for cmake</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake-gui</span></code>:   a real GUI for cmake</p></li>
</ul>
</section>
<section id="important-options">
<h2>Important Options:<a class="headerlink" href="#important-options" title="Link to this heading">#</a></h2>
<section id="cmake-build-type">
<h3>CMAKE_BUILD_TYPE<a class="headerlink" href="#cmake-build-type" title="Link to this heading">#</a></h3>
<p>We support several build configurations for GTSAM (case insensitive)</p>
<p><code class="docutils literal notranslate"><span class="pre">`cmake</span> <span class="pre">-DCMAKE_BUILD_TYPE=[Option]</span> <span class="pre">..`</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Debug</span></code>: All error checking options on, no optimization. Use for development of new features and fixing issues.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Release</span></code>: Optimizations turned on, no debug symbols.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timing</span></code>: Adds ENABLE_TIMING flag to provide statistics on operation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Profiling</span></code>: Standard configuration for use during profiling</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code>: Same as Release, but with the - g flag
for debug symbols</p></li>
</ul>
</section>
<section id="cmake-install-prefix">
<h3>CMAKE_INSTALL_PREFIX<a class="headerlink" href="#cmake-install-prefix" title="Link to this heading">#</a></h3>
<p>The install folder. The default is typically <code class="docutils literal notranslate"><span class="pre">/usr/local/</span></code> .
To configure to install to your home directory, you could execute:
<code class="docutils literal notranslate"><span class="pre">`cmake</span> <span class="pre">-DCMAKE_INSTALL_PREFIX:PATH=$HOME</span> <span class="pre">..`</span></code></p>
</section>
<section id="gtsam-toolbox-install-path">
<h3>GTSAM_TOOLBOX_INSTALL_PATH<a class="headerlink" href="#gtsam-toolbox-install-path" title="Link to this heading">#</a></h3>
<p>The Matlab toolbox will be installed in a subdirectory of this folder, called <code class="docutils literal notranslate"><span class="pre">gtsam</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cmake -DGTSAM_TOOLBOX_INSTALL_PATH:PATH=$HOME/toolbox ..
</pre></div>
</div>
</section>
<section id="gtsam-build-convenience-libraries">
<h3>GTSAM_BUILD_CONVENIENCE_LIBRARIES<a class="headerlink" href="#gtsam-build-convenience-libraries" title="Link to this heading">#</a></h3>
<p>This is a build option to allow for tests in subfolders to be linked against convenience libraries rather than the full libgtsam.
Set with the command line as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DGTSAM_BUILD_CONVENIENCE_LIBRARIES</span><span class="p">:</span><span class="n">OPTION</span><span class="o">=</span><span class="n">ON</span> <span class="o">..</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> (Default): This builds convenience libraries and links tests against them.This option is suggested for gtsam developers, as it is possible to build and run tests without first building the rest of the library, and speeds up compilation for a single test.The downside of this option is that it will build the entire library again to build the full libgtsam library, so build / install will be slower.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code>: This will build all of libgtsam before any of the tests, and then link all of the tests at once.This option is best
for users of GTSAM, as it avoids rebuilding the entirety of gtsam an extra time.</p></li>
</ul>
</section>
<section id="gtsam-build-unstable">
<h3>GTSAM_BUILD_UNSTABLE<a class="headerlink" href="#gtsam-build-unstable" title="Link to this heading">#</a></h3>
<p>Enable build and install for libgtsam_unstable library.
Set with the command line as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DGTSAM_BUILD_UNSTABLE</span><span class="p">:</span><span class="n">OPTION</span><span class="o">=</span><span class="n">ON</span> <span class="o">..</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ON</span></code> (Default): When enabled, libgtsam_unstable will be built and installed with the same options as libgtsam.In addition, if tests are enabled, the unit tests will be built as well.The Matlab toolbox will also be generated
if the matlab toolbox is enabled, installing into a folder called <code class="docutils literal notranslate"><span class="pre">gtsam_unstable</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OFF</span></code>: If disabled, no <code class="docutils literal notranslate"><span class="pre">gtsam_unstable</span></code> code will be included in build or install.</p></li>
</ul>
</section>
<section id="mex-command">
<h3>MEX_COMMAND<a class="headerlink" href="#mex-command" title="Link to this heading">#</a></h3>
<p>Path to the mex compiler. Defaults to assume the path is included in your shell ‘s PATH environment variable. mex is installed with matlab at <code class="docutils literal notranslate"><span class="pre">$MATLABROOT/bin/mex</span></code>. The correct value for  <code class="docutils literal notranslate"><span class="pre">MATLABROOT</span></code> can be found by executing the command <code class="docutils literal notranslate"><span class="pre">matlabroot</span></code> in MATLAB</p>
</section>
</section>
<section id="running-the-unit-tests">
<h2>Running the unit tests<a class="headerlink" href="#running-the-unit-tests" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span></code> will build and run all of the tests.Note that the tests will only be built when using the “check” targets, to prevent <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> from building the tests unnecessarily.</p>
<p>You can also run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">timing</span></code> to build all of the timing scripts.
To run check on a particular module only, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check.[subfolder]</span></code> , so to run just the geometry tests, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check.geometry</span></code> .</p>
<p>Individual tests can be run by appending <code class="docutils literal notranslate"><span class="pre">.run</span></code> to the name of the test,
for example, to run <code class="docutils literal notranslate"><span class="pre">testMatrix</span></code>, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">testMatrix.run</span></code> .</p>
</section>
<section id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Link to this heading">#</a></h2>
<p>Here are some tips to get the best possible performance out of GTSAM.</p>
<ol class="arabic simple">
<li><p>Build in <code class="docutils literal notranslate"><span class="pre">Release</span></code> mode. GTSAM will run up to 10x faster compared to <code class="docutils literal notranslate"><span class="pre">Debug</span></code>
mode.</p></li>
<li><p>Enable TBB. On modern processors with multiple cores, this can easily speed up optimization by 30 - 50 %. Please note that this may not be true
for very small problems where the overhead of dispatching work to multiple threads outweighs the benefit. We recommend that you benchmark your problem with / without TBB.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">-march=native</span></code> to <code class="docutils literal notranslate"><span class="pre">GTSAM_CMAKE_CXX_FLAGS</span></code>. A performance gain of
25 - 30 % can be expected on modern processors. Note that this affects the portability of your executable. It may not run when copied to another system with older / different processor architecture. Also note that all dependent projects <strong>must</strong> be compiled with the same flag, or segfaults and other undefined behavior may result.</p></li>
<li><p>Possibly enable MKL. Please note that our benchmarks have shown that this helps only in very limited cases, and actually hurts performance in the usual case. We therefore recommend that you do <em>not</em> enable MKL, unless you have benchmarked it on your problem and have verified that it improves performance.</p></li>
</ol>
</section>
<section id="debugging-tips">
<h2>Debugging tips<a class="headerlink" href="#debugging-tips" title="Link to this heading">#</a></h2>
<p>Another useful debugging symbol is <code class="docutils literal notranslate"><span class="pre">_GLIBCXX_DEBUG</span></code>, which enables debug checks and safe containers in the standard C++ library and makes problems much easier to find.</p>
<blockquote>
<div><p>NOTE: The native Snow Leopard g++compiler / library contains a bug that makes it impossible to use _GLIBCXX_DEBUG. MacPorts g++compilers do work with it though.</p>
</div></blockquote>
<blockquote>
<div><p>NOTE: If _GLIBCXX_DEBUG is used to compile gtsam, anything that links against gtsam will need to be compiled with _GLIBCXX_DEBUG as well, due to the use of header - only Eigen.</p>
</div></blockquote>
</section>
<section id="installing-mkl-on-linux">
<h2>Installing MKL on Linux<a class="headerlink" href="#installing-mkl-on-linux" title="Link to this heading">#</a></h2>
<p>Intel has a guide
for installing MKL on Linux through APT repositories <a class="reference external" href="https://software.intel.com/en-us/articles/installing-intel-free-libs-and-python-apt-repo">here</a>.</p>
<p>After following the instructions, add the following to your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> (and afterwards, open a new terminal before compiling GTSAM):
<code class="docutils literal notranslate"><span class="pre">LD_PRELOAD</span></code>
need only be set if you are building the cython wrapper to use GTSAM from python.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/opt/intel/mkl/bin/mklvars.sh<span class="w"> </span>intel64
<span class="nb">export</span><span class="w"> </span><span class="nv">LD_PRELOAD</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$LD_PRELOAD</span><span class="s2">:/opt/intel/mkl/lib/intel64/libmkl_core.so:/opt/intel/mkl/lib/intel64/libmkl_sequential.so&quot;</span>
</pre></div>
</div>
<p>To use MKL in GTSAM pass the flag <code class="docutils literal notranslate"><span class="pre">-DGTSAM_WITH_EIGEN_MKL=ON</span></code> to cmake.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">LD_PRELOAD</span></code> fix seems to be related to a well known problem with MKL which leads to lots of undefined symbol errors, for example:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://software.intel.com/en-us/forums/intel-math-kernel-library/topic/300857">https://software.intel.com/en-us/forums/intel-math-kernel-library/topic/300857</a></p></li>
<li><p><a class="reference external" href="https://software.intel.com/en-us/forums/intel-distribution-for-python/topic/628976">https://software.intel.com/en-us/forums/intel-distribution-for-python/topic/628976</a></p></li>
<li><p><a class="reference external" href="https://groups.google.com/a/continuum.io/forum/#!topic/anaconda/J3YGoef64z8">https://groups.google.com/a/continuum.io/forum/#!topic/anaconda/J3YGoef64z8</a></p></li>
</ul>
<p>Failing to specify <code class="docutils literal notranslate"><span class="pre">LD_PRELOAD</span></code> may lead to errors such as:
<code class="docutils literal notranslate"><span class="pre">ImportError:</span> <span class="pre">/opt/intel/mkl/lib/intel64/libmkl_vml_avx2.so:</span> <span class="pre">undefined</span> <span class="pre">symbol:</span> <span class="pre">mkl_serv_getenv</span></code>
or
<code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">MKL</span> <span class="pre">FATAL</span> <span class="pre">ERROR:</span> <span class="pre">Cannot</span> <span class="pre">load</span> <span class="pre">libmkl_avx2.so</span> <span class="pre">or</span> <span class="pre">libmkl_def.so.</span></code>
when importing GTSAM using the cython wrapper in python.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Build</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#quickstart">Quickstart</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#important-installation-notes">Important Installation Notes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-configuration-options-and-details">CMake Configuration Options and Details</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#important-options">Important Options:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-build-type">CMAKE_BUILD_TYPE</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-install-prefix">CMAKE_INSTALL_PREFIX</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gtsam-toolbox-install-path">GTSAM_TOOLBOX_INSTALL_PATH</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gtsam-build-convenience-libraries">GTSAM_BUILD_CONVENIENCE_LIBRARIES</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gtsam-build-unstable">GTSAM_BUILD_UNSTABLE</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mex-command">MEX_COMMAND</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-unit-tests">Running the unit tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#performance">Performance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-tips">Debugging tips</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-mkl-on-linux">Installing MKL on Linux</a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/build-project.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, GTSAM.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>